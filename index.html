<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D –ö–∞–∑–∏–Ω–æ –ö—Ä–∞—à</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            font-family: 'Arial', sans-serif;
            color: white;
            user-select: none;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        #crash-display {
            position: relative;
            width: 300px;
            height: 150px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            border: 2px solid gold;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
            overflow: hidden;
        }
        
        #multiplier {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(to right, gold, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            z-index: 2;
        }
        
        #graph {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.3;
        }
        
        #controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        #bet-input {
            padding: 15px;
            width: 200px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.2rem;
            text-align: center;
        }
        
        #bet-amount {
            color: gold;
            font-size: 1.5rem;
            margin-top: 5px;
        }
        
        button {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #ff8c00, gold);
            color: #1a1a2e;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.6);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: gray;
            box-shadow: none;
            transform: none;
            cursor: not-allowed;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: gold;
            opacity: 0;
        }
        
        #history {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        
        .history-item {
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .win {
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
        }
        
        .lose {
            background: linear-gradient(45deg, #F44336, #FF9800);
        }
        
        #balance {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 1.5rem;
            color: gold;
        }
        
        #sound-toggle {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance-amount">1000</span>‚ÇΩ</div>
        
        <div id="crash-display">
            <div id="multiplier">1.00x</div>
            <canvas id="graph"></canvas>
        </div>
        
        <div id="controls">
            <input type="number" id="bet-input" min="10" max="1000" value="100">
            <div id="bet-amount">–°—Ç–∞–≤–∫–∞: 100‚ÇΩ</div>
            <button id="bet-button">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
            <button id="cashout-button" disabled>–ó–∞–±—Ä–∞—Ç—å</button>
        </div>
        
        <div id="history"></div>
        
        <button id="sound-toggle">üîä</button>
    </div>
    
    <audio id="tick-sound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3" preload="auto"></audio>
    <audio id="crash-sound" src="https://www.soundjay.com/mechanical/sounds/explosion-01.mp3" preload="auto"></audio>
    <audio id="win-sound" src="https://www.soundjay.com/human/sounds/applause-8.mp3" preload="auto"></audio>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        let balance = 1000;
        let currentBet = 0;
        let multiplier = 1.00;
        let isRunning = false;
        let cashoutMultiplier = 0;
        let gameInterval;
        let graphCtx;
        let soundEnabled = true;
        let history = [];
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const balanceElement = document.getElementById('balance-amount');
        const multiplierElement = document.getElementById('multiplier');
        const betInput = document.getElementById('bet-input');
        const betAmountElement = document.getElementById('bet-amount');
        const betButton = document.getElementById('bet-button');
        const cashoutButton = document.getElementById('cashout-button');
        const historyElement = document.getElementById('history');
        const soundToggle = document.getElementById('sound-toggle');
        const graphCanvas = document.getElementById('graph');
        const tickSound = document.getElementById('tick-sound');
        const crashSound = document.getElementById('crash-sound');
        const winSound = document.getElementById('win-sound');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è canvas
        graphCtx = graphCanvas.getContext('2d');
        graphCanvas.width = graphCanvas.offsetWidth;
        graphCanvas.height = graphCanvas.offsetHeight;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
        function updateBalance() {
            balanceElement.textContent = balance;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏
        betInput.addEventListener('input', function() {
            const betValue = Math.min(Math.max(parseInt(this.value) || 10, 10), 1000);
            this.value = betValue;
            betAmountElement.textContent = `–°—Ç–∞–≤–∫–∞: ${betValue}‚ÇΩ`;
        });
        
        // –ó–≤—É–∫
        soundToggle.addEventListener('click', function() {
            soundEnabled = !soundEnabled;
            this.textContent = soundEnabled ? 'üîä' : 'üîá';
        });
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = `hsl(${Math.random() * 60 + 20}, 100%, 50%)`;
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                document.body.appendChild(confetti);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è
                const animation = confetti.animate([
                    { transform: `translateY(-100vh) rotate(0deg)`, opacity: 1 },
                    { transform: `translateY(${Math.random() * 100 + 100}vh) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.1, 0.8, 0.3, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }
        
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞
        function drawGraph(progress) {
            graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);
            
            // –ì—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
            const gradient = graphCtx.createLinearGradient(0, 0, 0, graphCanvas.height);
            gradient.addColorStop(0, 'rgba(255, 215, 0, 0.8)');
            gradient.addColorStop(1, 'rgba(255, 69, 0, 0.2)');
            
            graphCtx.beginPath();
            graphCtx.moveTo(0, graphCanvas.height);
            
            // –†–∏—Å—É–µ–º –∫—Ä–∏–≤—É—é
            for (let x = 0; x <= graphCanvas.width; x++) {
                const xProgress = x / graphCanvas.width;
                if (xProgress > progress) break;
                
                const y = graphCanvas.height * (1 - easeOutQuad(xProgress) * 0.9);
                graphCtx.lineTo(x, y);
            }
            
            graphCtx.strokeStyle = gradient;
            graphCtx.lineWidth = 3;
            graphCtx.stroke();
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥ –∫—Ä–∏–≤–æ–π
            graphCtx.lineTo(graphCanvas.width * progress, graphCanvas.height);
            graphCtx.closePath();
            graphCtx.fillStyle = 'rgba(255, 215, 0, 0.1)';
            graphCtx.fill();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
        function easeOutQuad(t) {
            return t * (2 - t);
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        betButton.addEventListener('click', function() {
            if (isRunning) return;
            
            const betAmount = parseInt(betInput.value);
            if (betAmount > balance) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!');
                return;
            }
            
            currentBet = betAmount;
            balance -= currentBet;
            updateBalance();
            
            isRunning = true;
            multiplier = 1.00;
            cashoutMultiplier = 0;
            betButton.disabled = true;
            cashoutButton.disabled = false;
            
            multiplierElement.textContent = multiplier.toFixed(2) + 'x';
            multiplierElement.style.color = 'gold';
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–æ—á–∫—É –∫—Ä–∞—à–∞ (1.1x - 10x)
            const crashPoint = 1 + Math.random() * 9;
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
            let time = 0;
            const maxTime = 100;
            
            gameInterval = setInterval(() => {
                time++;
                const progress = time / maxTime;
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å (–º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç)
                if (progress * 10 < crashPoint) {
                    multiplier = 1 + (progress * 10) * 0.9;
                    drawGraph(progress * (10 / crashPoint));
                    
                    // –ó–≤—É–∫ —Ç–∏–∫–∞ –∫–∞–∂–¥—ã–µ 5 –∫–∞–¥—Ä–æ–≤
                    if (time % 5 === 0 && soundEnabled) {
                        tickSound.currentTime = 0;
                        tickSound.play();
                    }
                } else {
                    // –ö—Ä–∞—à!
                    clearInterval(gameInterval);
                    isRunning = false;
                    betButton.disabled = false;
                    cashoutButton.disabled = true;
                    
                    if (soundEnabled) crashSound.play();
                    
                    multiplierElement.style.color = 'red';
                    multiplierElement.textContent = '–ö–†–ê–®!';
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                    addToHistory(false, crashPoint.toFixed(2));
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –≤–∑—Ä—ã–≤–∞
                    setTimeout(() => {
                        multiplierElement.textContent = crashPoint.toFixed(2) + 'x';
                    }, 1000);
                    
                    // –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        multiplierElement.textContent = '1.00x';
                        multiplierElement.style.color = 'gold';
                        drawGraph(0);
                    }, 3000);
                }
                
                multiplierElement.textContent = multiplier.toFixed(2) + 'x';
            }, 50);
        });
        
        // –ö–Ω–æ–ø–∫–∞ –∑–∞–±—Ä–∞—Ç—å
        cashoutButton.addEventListener('click', function() {
            if (!isRunning || cashoutMultiplier > 0) return;
            
            cashoutMultiplier = multiplier;
            clearInterval(gameInterval);
            isRunning = false;
            betButton.disabled = false;
            cashoutButton.disabled = true;
            
            const winAmount = Math.floor(currentBet * cashoutMultiplier);
            balance += winAmount;
            updateBalance();
            
            if (soundEnabled) winSound.play();
            createConfetti();
            
            multiplierElement.style.color = '#4CAF50';
            multiplierElement.textContent = cashoutMultiplier.toFixed(2) + 'x';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory(true, cashoutMultiplier.toFixed(2));
            
            // –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                multiplierElement.textContent = '1.00x';
                multiplierElement.style.color = 'gold';
                drawGraph(0);
            }, 3000);
        });
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
        function addToHistory(isWin, value) {
            const item = document.createElement('div');
            item.className = `history-item ${isWin ? 'win' : 'lose'}`;
            item.textContent = value;
            
            historyElement.insertBefore(item, historyElement.firstChild);
            history.unshift({ isWin, value });
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 10 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
            if (history.length > 10) {
                historyElement.removeChild(historyElement.lastChild);
                history.pop();
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateBalance();
        drawGraph(0);
    </script>
</body>
</html>
